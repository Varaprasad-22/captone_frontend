<p>on-specific-ticket works!</p>

<div *ngIf="loading">
  <p>Loading ticket details...</p>
</div>

<div *ngIf="!loading && ticket">

  <div class="ticket-section">
    <h2>Ticket Details</h2>

    <p><b>Ticket ID:</b> {{ ticket.id }}</p>
    <p><b>Title:</b> {{ ticket.title }}</p>
    <p><b>Description:</b> {{ ticket.description }}</p>
    <p><b>Status:</b> {{ ticket.status }}</p>
    <p><b>Priority:</b> {{ ticket.priority }}</p>
    <p><b>Created At:</b> {{ ticket.createdAt | date:'short' }}</p>
  </div>

  <hr />

    <div class="ticket-section">
    <h3>Uploaded Files</h3>

    <p *ngIf="attachments.length === 0">
      No files uploaded
    </p>

    <div *ngFor="let file of attachments" style="margin-bottom:15px">

      <img *ngIf="file.fileType?.startsWith('image')"
           [src]="attachmentUrl(file.id)"
           alt="attachment"
           style="max-width:300px; border:1px solid #ccc; display:block" />

      <div *ngIf="file.fileType === 'application/pdf'">
        <a [href]="attachmentUrl(file.id)" target="_blank">
           View PDF  {{ file.fileName }}
        </a>
      </div>
      <div *ngIf="!file.fileType?.startsWith('image') 
                  && file.fileType !== 'application/pdf'">
        <a [href]="attachmentUrl(file.id)" target="_blank">
           Download {{ file.fileName }}
        </a>
      </div>

    </div>
  </div>

  <hr />

  <div class="ticket-section">
    <h3>Comments</h3>

    <button (click)="refreshComments()">
      Refresh Comments
    </button>

    <p *ngIf="comments.length === 0">
      No comments yet
    </p>

    <div *ngFor="let comment of comments" class="comment-box">
      <p><b>{{ comment.user }}</b></p>
      <p>{{ comment.message }}</p>
      <small>{{ comment.createdAt | date:'short' }}</small>
      <hr />
    </div>
  </div>

</div>

<div *ngIf="!loading && !ticket">
  <p>Failed to load ticket details.</p>
</div>
