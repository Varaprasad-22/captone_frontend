<div class="page-header">
  <h1>Open Ticket Pool</h1>
  <p>Available tickets waiting to be assigned or picked up.</p>
</div>

<div *ngIf="loading" class="center-msg">
  <div class="spinner"></div>
  <p>Loading available tickets...</p>
</div>

<div *ngIf="errorMessage" class="center-msg" style="color:#ef4444;">
  <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
</div>

<div class="table-card" *ngIf="!loading && tickets.length > 0">
  <table class="styled-table">
    <thead>
      <tr>
        <th>Ticket ID</th>
        <th>Subject</th>
        <th>Category</th>
        <th>Priority</th>
        <th>Status</th>
        <th>Unassigned Since</th> <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of tickets" (click)="viewTicket(t.ticketId)">
        
        <td><span class="col-id">#{{ t.ticketId.substring(0,6) }}</span></td>

        <td><span class="col-title">{{ t.title }}</span></td>

        <td><span class="category-tag">{{ t.category }}</span></td>

        <td>
          <span class="priority-badge" [ngClass]="'p-' + t.priority">
            <i class="fas" [ngClass]="{'fa-arrow-up': t.priority==='HIGH', 'fa-minus': t.priority==='MEDIUM', 'fa-arrow-down': t.priority==='LOW'}"></i>
            {{ t.priority }}
          </span>
        </td>

        <td>
          <span class="status-text">{{ t.status }}</span>
        </td>

        <td>
          <span style="font-size:13px; color:#64748b;">
            {{ t.createdAt | date:'MMM d, h:mm a' }}
          </span>
        </td>

        <td>
          <button class="btn-view" title="View Details">
            <i class="fas fa-arrow-right"></i>
          </button>
        </td>

      </tr>
    </tbody>
  </table>
</div>

<div *ngIf="!loading && tickets.length === 0 && !errorMessage" class="center-msg">
  <i class="fas fa-check-circle" style="font-size:40px; color:#10b981; margin-bottom:15px; opacity:0.8;"></i>
  <h3 style="color:#334155;">All Caught Up!</h3>
  <p>There are no open tickets pending assignment.</p>
</div>